%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "struct_tree.h"
#include "web_compiler.tab.h"
  int fileno(FILE*);
%}
%x ATTRIBUT
%x COMMENTAIRE
%x TEXT_MODE
%option noinput nounput

IDEN [A-Za-z_][A-Za-z0-9_]*
NB ([[:digit:]]+(\.[[:digit:]]*)?)|(\.[[:digit:]]+)
XML ^[xX]^[mM]^[lL]      
%%


fun  {return FUN;}
rec  {return REC;}
let  {return LET;}
 =   {return =;}
if   {return IF;}
where  {return WHERE;}
in  {return IN;}
enum  {return ENUM;}
then {return THEN;}
else {return ELSE;}
with {return WITH;}
match {return MATCH;}
     


{IDEN} {return IDEN;}

{NB} {yyval.value=atof(yytext);
        return NUM;
        return ID;}

{XML} {return XML;}

[< > >= =< == . , ;  ] {return *yytext;}
[+ * ( ) \- / \% \*\*|\^]{return *yytext;}
     

[[:alpha:]]+ {
  yylval.name = strdup(yytext);
  return TAG;
}
"}" {return CLOSE;}

\" {BEGIN TEXT_MODE;}

<TEXT_MODE>\" {BEGIN INITIAL;}

<TEXT_MODE>[[:alpha:]]+ {
  yylval.name = strdup(yytext);
 return TEXT;
 }
      
<ATTRIBUT>\" {BEGIN INITIAL;}

<ATTRIBUT>.{IDEN} {
   yylval.name = strdup(yytext)
    return KEY;
 }



<ATTRIBUT>\" {BEGIN INITIAL;}
//<AATRIBUT>{IDEN}.{WWW.}{IDEN}{
//yylval.name = strdup(yytext);
<ATTRIBUT>.{IDEN} {
    yylval.name = strdup(yytext);
   return VALUE;
 }
     


.|\n {}
